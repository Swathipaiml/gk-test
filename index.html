<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GK Online Test</title>
<style>
body { font-family: Arial; background:#f4f6f8; padding:20px; }
h2 { text-align:center; }
.question { margin-bottom:15px; }
button { padding:10px 20px; font-size:16px; }
#warning { color:red; font-weight:bold; }
</style>
</head>

<body>

<h2>General Knowledge Test</h2>
<p>âš  Do NOT switch tabs/windows. Max allowed: 2</p>
<p id="warning"></p>

<div id="quiz"></div>
<button onclick="submitTest()">Submit Test</button>

<script>
const questions = [
  {q:"Capital of India?", a:["Mumbai","Delhi","Kolkata","Chennai"], c:1},
  {q:"National animal of India?", a:["Lion","Tiger","Elephant","Leopard"], c:1},
  {q:"Who invented computer?", a:["Newton","Charles Babbage","Edison","Einstein"], c:1},
  {q:"Largest planet?", a:["Earth","Mars","Jupiter","Saturn"], c:2},
  {q:"Currency of Japan?", a:["Yuan","Won","Yen","Dollar"], c:2}
];

// shuffle questions
questions.sort(() => Math.random() - 0.5);

const quizDiv = document.getElementById("quiz");

// render questions
questions.forEach((item, index) => {
  const block = document.createElement("div");
  block.className = "question";

  let html = <p>${index + 1}. ${item.q}</p>;
  item.a.forEach((opt, i) => {
    html += `
      <label>
        <input type="radio" name="q${index}" value="${i}"> ${opt}
      </label><br>
    `;
  });

  block.innerHTML = html;
  quizDiv.appendChild(block);
});

// tab switch detection
let switchCount = 0;
document.addEventListener("visibilitychange", () => {
  if (document.hidden) {
    switchCount++;
    alert("Tab switched! Count: " + switchCount);
    if (switchCount > 2) {
      alert("Test terminated due to tab switching");
      submitTest();
    }
  }
});

function submitTest() {
  let score = 0;
  questions.forEach((q, i) => {
    const ans = document.querySelector(input[name="q${i}"]:checked);
    if (ans && Number(ans.value) === q.c) {
      score++;
    }
  });
  alert(Score: ${score}/${questions.length}\nTab switches: ${switchCount});
}
</script>

</body>

</html>
